# Email From Template

_Email things... from templates. For Craft 2._

by Michael Rog  
[https://topshelfcraft.com](https://topshelfcraft.com)



## What is _Email From Template_?

The **Email From Template** plugin provides a service method, also available via a template variable, for sending email messages from your Twig templates:

```twig
{% set txtBody %}
   Around the ragged rocks the rugged rascal ran.
{% endset %}
 
{% set emailSettings = {
   toFirstName: 'Don',
   toLastName: 'Lockwood',
   subject: 'Speech practice',
   body: txtBody
} %}
 
{% do craft.emailFromTemplate.sendEmail(setemailSettingstings) %}
```

The `sendEmail` method is accessible via the `craft()->emailFromTemplate` service. It works _almost_ identically to the method of the same name found in Craft's [`EmailService`](https://craftcms.com/classreference/services/EmailService).

It takes two parameters:
 - `$settings` &mdash; an [`EmailModel`](https://craftcms.com/classreference/models/EmailModel), or an array of settings from which an `EmailModel` will be created.
 - `$variables` &mdash; an array of variables that will be available to the `body` and `htmlBody` templates when they are rendered
 
The `sendEmail` method in **Email From Template** offers a couple handy conveniences on top of the [native functionality](https://craftcms.com/classreference/services/EmailService#sendEmail-detail):
 - You may supply a `bodyTemplate` param (in place of the `body`). Pass in the path of a Twig template, just like you would specify a template for a Twig include, and that template will be used to generate the body.
 - You may supply a `htmlBodyTemplate` param (in place of the `htmlBody`). Pass in the path of a Twig template, just like you would specify a template for a Twig include, and that template will be used to generate the HTML body. (If you don't supply an `htmlBody` or `htmlBodyTemplate`, the HTML body of the email will be generated by processing the text body through Markdown.)
 - If no `toEmail` is provided, but a currently logged-in user is available, the email will be sent to the currently logged-in user by default.
 
 
## I found a bug.

Please submit a PR to the `dev` branch. Or, send a description of the issue, along with beer, to [support@topshelfcraft.com](mailto:support@topshelfcraft.com).